(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{172:function(t,e,i){"use strict";var s=i(15),a=i(35),o=i(27),n=i(22),r=i(73),c=i(36),l=i(39),d=i(25),u=i(2),p=i(6),h=i(194),m=i(191),_=i(192),f=i(193),g=i(196),b=i(26),v=i(178);let C=null;var y={name:"countdown",props:{product:{type:Object},deadline:{type:String},end:{type:String},stop:{type:Boolean}},data:()=>({now:Math.trunc((new Date).getTime()/1e3),date:null,diff:0}),created(){if(!this.deadline&&!this.end)throw new Error("Missing props 'deadline' or 'end'");let t=this.endDate;if(this.date=Math.trunc(new Date(t).getTime()/1e3),!this.date)throw new Error("Invalid props value, correct the 'deadline' or 'end'");C=setInterval((()=>{this.now=Math.trunc((new Date).getTime()/1e3)}),1e3)},computed:{seconds(){return Math.trunc(this.diff)%60},minutes(){return Math.trunc(this.diff/60)%60},hours(){return Math.trunc(this.diff/60/60)%24},days(){return Math.trunc(this.diff/60/60/24)},endDate(){let t=this.product.price_effective_date;if(t){let e=new Date;if(t.end){if(new Date(t.end)>e)return new Date(t.end).toISOString()}else if(t.start&&new Date(t.start)>e)return new Date(t.start).toISOString()}return this.deadline}},watch:{now(t){console.log(t),this.diff=this.date-this.now,console.log(this.diff),(this.diff<=0||this.stop)&&(this.diff=0,clearInterval(C))}},filters:{twoDigits:t=>t.toString().length<=1?"0"+t.toString():t.toString()},destroyed(){clearInterval(C)}},A=(i(224),i(28)),w=Object(A.a)(y,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.date>t.now?i("ul",{staticClass:"countdown"},[t.days>0?i("li",[i("p",{staticClass:"digit"},[t._v(t._s(t._f("twoDigits")(t.days)))]),i("p",{staticClass:"text"},[t._v(t._s(t.days>1?"dias":"dia"))])]):t._e(),i("li",[i("p",{staticClass:"digit"},[t._v(t._s(t._f("twoDigits")(t.hours)))]),i("p",{staticClass:"text"},[t._v(t._s(t.hours>1?"horas":"hora"))])]),i("li",[i("p",{staticClass:"digit"},[t._v(t._s(t._f("twoDigits")(t.minutes)))]),i("p",{staticClass:"text"},[t._v("min")])]),i("li",[i("p",{staticClass:"digit"},[t._v(t._s(t._f("twoDigits")(t.seconds)))]),i("p",{staticClass:"text"},[t._v("seg")])])]):t._e()}),[],!1,null,null,null).exports;const S=(t,e)=>{if("object"==typeof window){t=`productCard${t}Html`;const i="function"==typeof window[t]?window[t](e):window[t];if("string"==typeof i)return i}};let O=null;var k={name:"ProductCard",components:{AAlert:h.a,ALink:m.a,APicture:_.a,APrices:f.a,Countdown:w,ProductVariations:g.a},props:{product:Object,productId:String,isSmall:Boolean,headingTag:{type:String,default:"h3"},buyText:String,transitionClass:{type:String,default:"animated fadeIn"},canAddToCart:{type:Boolean,default:!0},ecomPassport:{type:Object,default:()=>b.a},accountUrl:{type:String,default:"/app/#/account/"},isLoaded:Boolean,installmentsOption:Object,discountOption:Object},data:()=>({body:{},isLoading:!1,isWaitingBuy:!1,isHovered:!1,isFavorite:!1,error:"",selectedVariationId:"",endDate:"2023-02-03T13:59:59.000Z",now:(new Date).getTime()}),computed:{i19addToFavorites:()=>Object(a.a)(s.m),i19outOfStock:()=>Object(a.a)(s.Qc),i19unavailable:()=>Object(a.a)(s.he),i19uponRequest:()=>"Sob consulta",isWithoutPrice(){return!Object(o.a)(this.body)},ratingHtml(){return S("Rating",this.body)},isPromo(){return new Date(this.endDate).getTime()>this.now},buyHtml(){return S("Buy",this.body)},footerHtml(){return S("Footer",this.body)},name(){return Object(n.a)(this.body)},endDateT(){let t=this.product.price_effective_date;if(t){let e=new Date;if(t.end){if(new Date(t.end)>e)return new Date(t.end)}else if(t.start&&new Date(t.start)>e)return new Date(t.start)}},strBuy(){return this.buyText||"object"==typeof window&&window.productCardBuyText||Object(a.a)(s.z)},isInStock(){return Object(r.a)(this.body)},isActive(){return this.body.available&&this.body.visible&&this.isInStock},isLogged:()=>b.a.checkAuthorization(),discount(){const{body:t}=this;return Object(c.a)(t)?Math.round(100*(t.base_price-Object(o.a)(t))/t.base_price):0}},methods:{setBody(t){this.body=Object.assign({},t),delete this.body.body_html,delete this.body.body_text,delete this.body.inventory_records,delete this.body.price_change_records,this.isFavorite=Object(v.a)(this.body._id,this.ecomPassport)},showVariationPicture(t){if(t.picture_id){const e=this.body.pictures.findIndex((e=>{let{_id:i}=e;return i===t.picture_id}));this.currentGalleyImg=e+1}},handleGridOption(t){let{gridId:e,gridIndex:i,optionText:s}=t;if(0===i){const t=this.body.variations.find((t=>Object(l.a)(t,e)===s));t&&this.showVariationPicture(t)}},fetchItem(){this.productId&&(this.isLoading=!0,Object(u.g)({url:`/products/${this.productId}.json`}).then((t=>{let{data:e}=t;this.$emit("update:product",e),this.setBody(e),this.$emit("update:is-loaded",!0)})).catch((t=>{console.error(t),this.body.name&&this.body.slug&&this.body.pictures||(this.error=Object(a.a)(s.W))})).finally((()=>{this.isLoading=!1})))},toggleFavorite(){this.isLogged&&(this.isFavorite=Object(v.b)(this.body._id,this.ecomPassport))},buy(){const t=this.body;t.variations&&t.variations.length&&!this.selectedVariationId&&(this.canAddToCart=!1);const e=this.selectedVariationId;this.$emit("buy",{product:t,variationId:e}),this.canAddToCart&&(this.isWaitingBuy=!0,Object(u.g)({url:`/products/${t._id}.json`}).then((s=>{let{data:a}=s;const o=["customizations","kit_composition"];for(let t=0;t<o.length;t++){const e=a[o[t]];if(e&&e.length)return Promise.all([i.e(0),i.e(2),i.e(6),i.e(3),i.e(19)]).then(i.bind(null,409)).then((t=>{new d.a({render:e=>e(t.default,{props:{product:a}})}).$mount(this.$refs.quickview)}))}const{quantity:n,price:r}=a;p.a.addProduct({...t,quantity:n,price:r},e)})).catch((e=>{console.error(e),window.location=`/${t.slug}`})).finally((()=>{this.isWaitingBuy=!1})))}},created(){this.product&&(this.setBody(this.product),void 0===this.product.available&&(this.body.available=!0),void 0===this.product.visible&&(this.body.visible=!0)),this.isLoaded||this.fetchItem(),this.isPromo&&(O=setInterval((()=>{this.now=(new Date).getTime()}),1e3))}};e.a=k},176:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"prices i",class:{"prices--literal":t.isLiteral,"prices--big":t.isBig}},[t.comparePrice?i("span",{staticClass:"prices__compare"},[t.isLiteral?[i("small",[t._v(" "+t._s(t.i19from)+" ")]),i("s",[t._v(t._s(t.formatMoney(t.comparePrice)))]),i("small",[t._v(" "+t._s(t.i19to)+" ")])]:i("s",[t._v(t._s(t.formatMoney(t.comparePrice)))])],2):t._e(),i("strong",{staticClass:"prices__value"},[t.hasVariedPrices?i("small",[t._v(" "+t._s(t.i19asOf)+" ")]):t._e(),t._v(" "+t._s(t.formatMoney(t.price))+" ")]),t.installmentsNumber>1&&t.installmentValue?i("div",{key:"installments",staticClass:"prices__installments"},[t.isLiteral?i("small",[t._v(" "+t._s(t.i19upTo)+" ")]):t._e(),t._v(" "+t._s(t.installmentsNumber)+"x "),t.isLiteral?i("small",[t._v(" "+t._s(t.i19of)+" ")]):t._e(),i("span",[t._v(" "+t._s(t.formatMoney(t.installmentValue))+" ")]),!t.monthlyInterest&&t.isLiteral?i("small",[t._v(" "+t._s(t.i19interestFree)+" ")]):t._e()]):t._e(),i("div",{key:"point",staticClass:"prices__points"},[i("i",{staticClass:"i-check-circle"}),i("a",{attrs:{target:"_blank",href:"/pages/blow-coins"}},[t._v(" Cashback "),i("span",[t._v(t._s(t.formatMoney(t.price/20)))])])]),"number"==typeof t.priceWithDiscount&&t.priceWithDiscount<t.price?i("div",{key:"discount",staticClass:"prices__discount"},["string"==typeof t.discountLabel&&t.discountLabel?[i("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")]),i("small",{staticClass:"prices__discount-label"},[t._v(" "+t._s(t.discountLabel)+" ")])]:[i("small",[t._v(" "+t._s(t.i19asOf)+" ")]),i("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")])]],2):t._e()])},a=[]},179:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product-card",class:{"product-card--small":t.isSmall},attrs:{"data-product-id":t.body._id,"data-sku":t.body.sku},on:{mouseover:function(e){t.isHovered=!0}}},[i("a-link",{staticClass:"product-card__link",attrs:{href:"/"+t.body.slug,title:t.name}},[i("transition",{attrs:{"enter-active-class":t.transitionClass}},[t.isLoading?t._e():i("section",[t._t("discount-tag",(function(){return[t.isActive&&t.discount>0?i("span",{staticClass:"product-card__offer-stamp"},[i("i",{staticClass:"i-arrow-down"}),t._v(" "),i("b",[t._v(t._s(t.discount))]),t._v("% ")]):t._e()]}),null,{discount:t.discount}),t._t("stamps"),t._t("body",(function(){return[t._t("header"),i("div",{staticClass:"product-card__pictures"},[t.body.pictures&&t.body.pictures.length?t._l(t.body.pictures.slice(0,2).reverse(),(function(e,s){return 1===t.body.pictures.length||1===s||t.isHovered?i("a-picture",{key:s,staticClass:"product-card__picture",attrs:{src:e,"can-calc-height":!1}}):t._e()})):i("a-picture",{staticClass:"product-card__picture"})],2),t._t("title",(function(){return[i(t.headingTag,{tag:"component",staticClass:"product-card__name"},[t._v(" "+t._s(t.name)+" ")])]}))]})),t._t("rating",(function(){return[t._m(0)]})),t.isInStock?t.isWithoutPrice?t._t("without-price",(function(){return[i("p",{staticClass:"badge badge-info mt-auto"},[t._v(" "+t._s(t.i19uponRequest)+" ")])]})):[t._t("prices",(function(){return[i("a-prices",{staticClass:"product-card__prices",attrs:{product:t.body,"installments-option":t.installmentsOption,"discount-option":t.discountOption}})]}))]:t._t("out-of-stock",(function(){return[i("p",{staticClass:"badge badge-dark mt-auto"},[t._v(" "+t._s(t.i19outOfStock)+" ")])]})),t._t("favorite",(function(){return[i("a",{staticClass:"btn product-card__favorite fade",attrs:{href:t.isLogged?null:t.accountUrl},on:{click:t.toggleFavorite}},[i("i",{staticClass:"i-heart mr-1",class:t.isFavorite?"active":null})])]})),t._t("footer",(function(){return[t.footerHtml?i("div",{domProps:{innerHTML:t._s(t.footerHtml)}}):t._e()]}))],2)])],1),i("product-variations",{attrs:{product:t.body,"selected-id":t.selectedVariationId,"max-options-btns":2},on:{"update:selectedId":function(e){t.selectedVariationId=e},"update:selected-id":function(e){t.selectedVariationId=e},"select-option":t.handleGridOption}}),i("a-alert",{attrs:{"can-show":!t.canAddToCart,variant:"info"},on:{dismiss:function(e){t.alertText=null}}},[t._v(" Selecione uma opção antes de comprar ")]),t.body.price&&t.isInStock?[i("div",{staticClass:"product-card__buy fade",on:{click:t.buy}},[t._t("buy",(function(){return[t.buyHtml?i("div",{domProps:{innerHTML:t._s(t.buyHtml)}}):t._e(),i("button",{staticClass:"btn btn-primary",class:t.isSmall?"btn-sm":"btn-block",attrs:{type:"button",disabled:t.isWaitingBuy}},[t.isWaitingBuy?i("span",{staticClass:"product-card__buy-loading spinner-grow spinner-grow-sm",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t._e(),t._t("buy-button-content",(function(){return[i("i",{staticClass:"i-shopping-bag mr-1"}),t._v(" "+t._s(t.strBuy)+" ")]}))],2)]}))],2)]:t._e(),t.endDateT>t.now?i("countdown",{key:t.body._id,attrs:{product:t.body,deadline:t.endDate}}):t._e(),t.isLoading?[t._t("default"),t.error?i("div",{staticClass:"alert alert-warning small",attrs:{role:"alert"}},[t._v(" "+t._s(t.error)+" ")]):t._e()]:t._e(),i("div",{ref:"quickview"})],2)},a=[function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"product-card__rating",attrs:{"data-sku":t.body.sku},domProps:{innerHTML:t._s(t.ratingHtml)}})}]},180:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.product.variations?i("div",{staticClass:"variations"},t._l(t.variationsGrids,(function(e,s,a){return t.filteredGrids[s]?i("div",{class:"variations__grid variations__grid--"+s},[i("div",{staticClass:"mb-2"},[i("span",{staticClass:"variations__grid-title h5"},[t._v(" "+t._s(t.getGridTitle(s))+" ")]),t.selectedOptions[s]?i("span",{key:"success",staticClass:"variations__value variations__value"},[i("i",{staticClass:"i-check mr-1"}),t._v(" "+t._s(t.selectedOptions[s])+" ")]):i("span",{staticClass:"variations__value variations__value--empty"},[i("i",{staticClass:"i-arrow-down mr-1"}),t._v(" "+t._s(t.i19selectVariation)+" ")])]),e.length<=t.maxOptionsBtns?t._l(e,(function(e){return i("button",{staticClass:"variations__option btn btn-light",class:[t.selectedOptions[s]===e?"variations__option--selected":null,"variations__option--"+e,t.filteredGrids[s].includes(e)?null:"disabled"],style:"colors"===s?t.getColorOptionBg(e):null,on:{click:function(i){return t.selectOption(e,s,a)}}},[t._v(" "+t._s(e)+" ")])})):i("select",{staticClass:"variations__select custom-select",on:{change:function(e){return t.selectOption(e.target.value,s,a)}}},[i("option",{domProps:{selected:!t.selectedOptions[s]}},[t._v(" Selecionar Sabor ")]),t._l(e,(function(e){return i("option",{attrs:{disabled:!t.filteredGrids[s].includes(e)},domProps:{value:e,selected:t.selectedOptions[s]===e}},[t._v(" "+t._s(e)+" ")])}))],2)],2):t._e()})),0):t._e()},a=[]},190:function(t,e,i){var s=i(225);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i(106).default)("4e255502",s,!0,{})},224:function(t,e,i){"use strict";i(190)},225:function(t,e,i){(e=i(105)(!0)).push([t.i,'.countdown{margin:0;padding:0}.countdown li{display:inline-block;margin:0 8px;position:relative;text-align:center}.countdown li p{margin:0}.countdown li:after{content:":";font-size:32px;position:absolute;right:-13px;top:0}.countdown li:first-of-type{margin-left:0}.countdown li:last-of-type{margin-right:0}.countdown li:last-of-type:after{content:""}.countdown .digit{font-size:32px;font-weight:600;line-height:1.4}.countdown .digit,.countdown .text{color:#df0174!important;margin-bottom:0}.countdown .text{font-size:10px;text-transform:uppercase}@media(max-width:410px){.countdown .digit,.countdown li:after{font-size:23px!important}}',"",{version:3,sources:["Countdown.vue"],names:[],mappings:"AAAA,WAAW,QAAQ,CAAC,SAAS,CAAC,cAAc,oBAAoB,CAAC,YAAY,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,gBAAgB,QAAQ,CAAC,oBAAoB,WAAW,CAAC,cAAc,CAAC,iBAAiB,CAAC,WAAW,CAAC,KAAK,CAAC,4BAA4B,aAAa,CAAC,2BAA2B,cAAc,CAAC,iCAAiC,UAAU,CAAC,kBAAkB,cAAc,CAAC,eAAe,CAAC,eAAe,CAAC,mCAAmC,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,cAAc,CAAC,wBAAwB,CAAC,wBAAwB,sCAAsC,wBAAwB,CAAC",file:"Countdown.vue",sourcesContent:['.countdown{margin:0;padding:0}.countdown li{display:inline-block;margin:0 8px;position:relative;text-align:center}.countdown li p{margin:0}.countdown li:after{content:":";font-size:32px;position:absolute;right:-13px;top:0}.countdown li:first-of-type{margin-left:0}.countdown li:last-of-type{margin-right:0}.countdown li:last-of-type:after{content:""}.countdown .digit{font-size:32px;font-weight:600;line-height:1.4}.countdown .digit,.countdown .text{color:#df0174!important;margin-bottom:0}.countdown .text{font-size:10px;text-transform:uppercase}@media(max-width:410px){.countdown .digit,.countdown li:after{font-size:23px!important}}']}]),t.exports=e},246:function(t,e,i){"use strict";i(4);var s=i(15),a=i(24),o=i(35),n=i(71),r=i(27),c=i(2),l=i(248),d=i(249),u=i.n(d),p=i(254);const h="object"==typeof window&&window.localStorage,m="shipping-to-zip",_=t=>{const e={};return["product_id","variation_id","sku","name","quantity","inventory","currency_id","currency_symbol","price","final_price","dimensions","weight"].forEach((i=>{void 0!==t[i]&&(e[i]=t[i])})),e};var f={name:"ShippingCalculator",components:{CleaveInput:u.a,ShippingLine:p.a},props:{zipCode:String,canSelectServices:Boolean,canInputZip:{type:Boolean,default:!0},countryCode:{type:String,default:a.$ecomConfig.get("country_code")},shippedItems:{type:Array,default:()=>[]},shippingResult:{type:Array,default:()=>[]},shippingData:{type:Object,default:()=>({})},shippingAppsSort:{type:Array,default:()=>window.ecomShippingApps||[]}},data:()=>({localZipCode:null,localShippedItems:[],amountSubtotal:null,shippingServices:[],selectedService:null,hasPaidOption:!1,freeFromValue:null,isScheduled:!1,retryTimer:null,isWaiting:!1,hasCalculated:!1,isInvalidZip:!1}),computed:{i19add$1ToEarn:()=>Object(o.a)(s.j),i19calculateShipping:()=>Object(o.a)(s.E),i19zipCode:()=>Object(o.a)(s.ve),i19freeShipping:()=>Object(o.a)(s.Cb).toLowerCase(),cleaveOptions(){return"BR"===this.countryCode?{blocks:[5,3],delimiter:"-"}:{blocks:[30]}},freeFromPercentage(){return this.hasPaidOption&&this.amountSubtotal<this.freeFromValue?Math.round(100*this.amountSubtotal/this.freeFromValue):null},productionDeadline(){let t=0;return this.shippedItems.forEach((e=>{if(e.quantity&&e.production_time){const{days:i,cumulative:s}=e.production_time,a=s?i*e.quantity:i;a>t&&(t=a)}})),t}},methods:{formatMoney:n.a,updateZipCode(){this.$emit("update:zip-code",this.localZipCode)},parseShippingOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.freeFromValue=null,this.shippingServices=[],t.length&&(t.forEach((t=>{const{validated:e,error:i,response:s}=t;if(e&&!i){s.shipping_services.forEach((e=>{this.shippingServices.push({app_id:t.app_id,...e})}));const e=s.free_shipping_from_value;e&&(!this.freeFromValue||this.freeFromValue>e)&&(this.freeFromValue=e)}})),this.shippingServices.length?(this.shippingServices=this.shippingServices.sort(((t,e)=>{const i=t.shipping_line.total_price-e.shipping_line.total_price;return i<0?-1:i>0?1:t.shipping_line.delivery_time&&e.shipping_line.delivery_time&&t.shipping_line.delivery_time.days<e.shipping_line.delivery_time.days?-1:1})),this.setSelectedService(0),this.hasPaidOption=Boolean(this.shippingServices.find((t=>t.shipping_line.total_price||t.shipping_line.price))),Array.isArray(this.shippingAppsSort)&&this.shippingAppsSort.length&&(this.shippingServices=Object(l.a)(this.shippingServices,this.shippingAppsSort))):e?this.scheduleRetry():this.fetchShippingServices(!0))},scheduleRetry(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;clearTimeout(this.retryTimer),this.retryTimer=setTimeout((()=>{this.localZipCode&&!this.shippingServices.length&&this.shippedItems.length&&this.fetchShippingServices(!0)}),t)},fetchShippingServices(t){"BR"!==this.countryCode||8===this.localZipCode.replace(/\D/g,"").length?(this.isInvalidZip=!1,this.isScheduled||(this.isScheduled=!0,setTimeout((()=>{this.isScheduled=!1;const{storeId:e}=this,i={...this.shippingData,to:{zip:this.localZipCode,...this.shippingData.to}};this.localShippedItems.length&&(i.items=this.localShippedItems,i.subtotal=this.amountSubtotal),this.isWaiting=!0,Object(c.c)({url:"/calculate_shipping.json",method:"POST",storeId:e,data:i}).then((e=>{let{data:i}=e;return this.parseShippingOptions(i.result,t)})).catch((e=>{t||this.scheduleRetry(4e3),console.error(e)})).finally((()=>{this.hasCalculated=!0,this.isWaiting=!1}))}),this.hasCalculated?150:50))):this.isInvalidZip=!0},submitZipCode(){this.updateZipCode(),h&&h.setItem(m,this.localZipCode),this.fetchShippingServices()},setSelectedService(t){this.canSelectServices&&(this.$emit("select-service",this.shippingServices[t]),this.selectedService=t)}},watch:{shippedItems:{handler(){setTimeout((()=>{this.localShippedItems=this.shippedItems.map(_);const{amountSubtotal:t}=this;this.amountSubtotal=this.shippedItems.reduce(((t,e)=>t+Object(r.a)(e)*e.quantity),0),this.hasCalculated&&(this.canSelectServices||t!==this.amountSubtotal||!this.shippingServices.length&&!this.isWaiting)&&this.fetchShippingServices()}),50)},deep:!0,immediate:!0},localZipCode(t){"BR"===this.countryCode&&8===t.replace(/\D/g,"").length&&window.location.pathname.startsWith("/app/")&&this.submitZipCode()},zipCode:{handler(t){t&&(this.localZipCode=t)},immediate:!0},shippingResult:{handler(t){t.length&&this.parseShippingOptions(t)},immediate:!0}},created(){if(!this.zipCode&&h){const t=h.getItem(m);t&&(this.localZipCode=t)}}};e.a=f},253:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shipping-calculator"},[t.canInputZip?i("form",{staticClass:"shipping-calculator__form",on:{submit:function(e){return e.preventDefault(),t.submitZipCode.apply(null,arguments)}}},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"shipping-calculator-zip"}},[t._v(" "+t._s(t.i19calculateShipping)+" ")]),i("div",{staticClass:"input-group"},[i("cleave-input",{staticClass:"form-control shipping-calculator__input",attrs:{type:"tel",id:"shipping-calculator-zip",placeholder:t.i19zipCode,"aria-label":t.i19zipCode,options:t.cleaveOptions},model:{value:t.localZipCode,callback:function(e){t.localZipCode=e},expression:"localZipCode"}}),i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit","aria-label":t.i19calculateShipping}},[i("i",{staticClass:"i-shipping-fast"})])])],1)])]):t._e(),t.isInvalidZip?i("small",{staticClass:"alert alert-warning py-2 d-inline-block",attrs:{role:"alert"}},[t._v(" Necessário inserir o CEP completo (8 dígitos) para cálculo ")]):t._e(),i("div",{staticClass:"shipping-calculator__services"},[i("transition-group",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated position-absolute fadeOutUp"}},[t.isWaiting?i("div",{key:"waiting",staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[t._v("Loading...")])]):i("div",{key:"services",staticClass:"list-group"},t._l(t.shippingServices,(function(e,s){return i(t.canSelectServices?"a":"div",{key:s,tag:"component",staticClass:"list-group-item",class:{"list-group-item-action":t.canSelectServices,active:t.canSelectServices&&t.selectedService===s},attrs:{href:t.canSelectServices&&"#"},on:{click:function(e){return e.preventDefault(),t.setSelectedService(s)}}},[i("span",{staticClass:"shipping-calculator__option"},[t._t("option",(function(){return[i("shipping-line",{attrs:{"shipping-line":e.shipping_line,"production-deadline":t.productionDeadline}}),i("small",[t._v(t._s(e.label))])]}),null,{service:e})],2)])})),1)]),i("transition",{attrs:{"enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},[t.freeFromPercentage?i("div",{staticClass:"shipping-calculator__free-from-value"},[t._t("free-from-value",(function(){return[i("span",[t._v(" "+t._s(t.i19add$1ToEarn.replace("$1",t.formatMoney(t.freeFromValue-t.amountSubtotal)))+" "),i("strong",[t._v(t._s(t.i19freeShipping))])]),t.freeFromPercentage>=33?i("div",{staticClass:"progress"},[i("div",{staticClass:"progress-bar progress-bar-striped",style:"width: "+t.freeFromPercentage+"%",attrs:{role:"progressbar","aria-valuenow":t.freeFromPercentage,"aria-valuemin":"0","aria-valuemax":"100"}},[i("span",[t._v(" "+t._s(t.i19freeShipping)+" "),i("i",{staticClass:"i-truck mx-1"}),i("strong",[t._v(t._s(t.freeFromPercentage)+"%")])])])]):t._e()]}),null,{amountSubtotal:t.amountSubtotal,freeFromValue:t.freeFromValue,freeFromPercentage:t.freeFromPercentage})],2):t._e()])],1)])},a=[]},263:function(t,e,i){"use strict";i(99),i(4);var s=i(15),a=i(35),o=i(2),n=i(6),r=i(26),c=i(194);const l="object"==typeof window&&window.sessionStorage,d=(t,e)=>{if(Array.isArray(e)){let i=void 0!==l.getItem("freebieData")?JSON.parse(l.getItem("freebieData")):[];e.forEach((s=>{t.data.items.find((t=>t.product_id===s))||(t.data.items.forEach((i=>{let{_id:s,product_id:a,flags:o}=i;o&&o.includes("freebie")&&!e.includes(a)&&t.removeItem(s)})),Object(o.g)({url:`/products/${s}.json`}).then((a=>{let{data:o}=a;o.variations&&o.variations.length?i&&Object.keys(i).forEach((a=>{for(let n=0;n<i[a]._id.length;n++)if(i[a]._id[n].includes("|")&&i[a]._id[n].split("|")[0]==s){let r=i[a]._id[n].split("|")[1],c=o.variations.find((t=>t._id==r&&t.quantity>0));"undefined"!==c&&(o.price=0,o.quantity=1,o.name=c.name,console.log(o),t.addProduct({...o,variation_id:r,keep_item_price:!0,flags:["freebie","__tmp"]},null,e.reduce(((t,e)=>e===s?t+1:t),0)))}})):o.quantity>0&&(o.price=0,o.quantity=1,t.addProduct({...o,keep_item_price:!0,flags:["freebie","__tmp"]},null,e.reduce(((t,e)=>e===s?t+1:t),0)))})).catch(console.error))}))}};var u={name:"DiscountApplier",components:{AAlert:c.a},props:{amount:Object,couponCode:String,hasCouponInput:{type:Boolean,default:!0},isFormAlwaysVisible:Boolean,isCouponApplied:Boolean,isAttentionWanted:Boolean,canAddFreebieItems:{type:Boolean,default:!0},modulesPayload:Object,ecomCart:{type:Object,default:()=>n.a},ecomPassport:{type:Object,default:()=>r.a}},data(){return{alertText:null,alertVariant:null,isFormVisible:this.isFormAlwaysVisible||this.couponCode,isLoading:!1,localCouponCode:this.couponCode,localAmountTotal:null,isUpdateSheduled:!1,freebieData:null}},computed:{i19add:()=>Object(a.a)(s.i),i19addDiscountCoupon:()=>Object(a.a)(s.k),i19code:()=>Object(a.a)(s.R),i19couponAppliedMsg:()=>Object(a.a)(s.eb),i19discountCoupon:()=>Object(a.a)(s.jb),i19hasCouponOrVoucherQn:()=>Object(a.a)(s.Lb),i19invalidCouponMsg:()=>Object(a.a)(s.Xb),i19campaignAppliedMsg:()=>Object(a.a)(s.F),canAddCoupon(){return!this.couponCode||!this.isCouponApplied||this.couponCode!==this.localCouponCode}},methods:{getFreebies(){const{freebieData:t}=this;let e={};if(this.ecomPassport.checkLogin()){const t=this.ecomPassport.getCustomer();e._id=t._id,t.display_name&&(e._id=t.display_name)}axios.post("https://us-central1-blow-gummies-app-brinde.cloudfunctions.net/app/ws/available-gifts",{storeId:storefront.settings.store_id,params:{customer:e,amount:{subtotal:this.localAmountTotal,...this.amount,total:this.localAmountTotal,discount:0},items:this.ecomCart.data.items}}).then((e=>{$("#app-blow_gummies").remove(),$(".cart__list").after('<div id="app-blow_gummies"></div>');let i=[];$.each(e.data.rules,(function(e,s){if(Array.isArray(s.product_ids)&&s.product_ids.length){$("#app-blow_gummies").append('<p class="freebie-rule-name">Selecione até <b>'+s.selectable+" brinde(s)</b> para a campanha: <b>"+s.label+"</b></p>");let a=$('<div class="freebie-rule" selectable="'+s.selectable+'" rule="rule_'+e+'" label="'+s.label+'"></div>');a.append('<input type="hidden" name="rule_'+e+'"/>'),$.each(s.product_ids,(function(e,n){Object(o.g)({url:`/products/${n}.json`}).then((e=>{let{data:o}=e;if(o.variations&&o.variations.length){let e=null!=t&&(void 0!==t[s.label]&&!!t[s.label]._id.find((t=>t.includes(o._id)))),n=null!=t&&(void 0!==t[s.label]&&(!!t[s.label]._id.find((t=>t.includes(o._id)))&&t[s.label]._id.find((t=>t.includes(o._id))).split("|")[1])),r=!!i.includes(o._id);!i.includes(o._id)&&e&&i.push(o._id);let c=$('<div class="freebie-item '+(1==r?"already_selected":"")+'" product_id="'+o._id+'">'+(r?"<span>Brinde já adicionado</span>":"")+'<img src="'+o.pictures[0].normal.url+'"/><label>'+o.name+'</label><select attr="variant_id" '+(0!=n?'class="readonly"':"")+'></select><button class="btn '+(e?"active":"")+'" type="button">'+(e?"Selecionado":"Selecionar")+"</button></div>"),l=c.find("select");$.each(o.variations,(function(t,e){e.quantity>0&&l.append('<option value="'+e._id+'" '+(n==e._id?"selected":"")+">"+e.name.replace(o.name+" / ","")+"</option>")})),a.append(c)}else if(o.quantity>0){let e=null!=t&&(void 0!==t[s.label]&&!!t[s.label]._id.find((t=>t==o._id))),n=!!i.includes(o._id);!i.includes(o._id)&&e&&i.push(o._id),a.append('<div class="freebie-item '+(1==n?"already_selected":"")+'" product_id="'+o._id+'">'+(n?"<span>Brinde já adicionado</span>":"")+'<img src="'+o.pictures[0].normal.url+'"/><label>'+o.name+'</label><button class="btn '+(e?"active":"")+'" type="button">'+(e?"Selecionado":"Selecionar")+"</button></div>")}})).catch(console.error)})),$("#app-blow_gummies").append(a)}})),$("body").on("click","",(function(){}))}))},fixAmount(){const t=this.amount||{subtotal:this.ecomCart.data.subtotal};this.localAmountTotal=(t.subtotal||0)+(t.freight||0)},parseDiscountOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;if(t.length){let i,s;t.forEach((t=>{const{validated:a,error:o,response:n,app_id:r}=t;if(a&&!o){const a=n.discount_rule;if(a){const s=a.extra_discount.value;e>s||(e=s,i={app_id:t.app_id,...a})}else n.invalid_coupon_message&&(s=n.invalid_coupon_message);if(this.canAddFreebieItems)if(120452==r){if(void 0!==n.freebie_product_ids){let t=[],e=void 0!==l.getItem("freebieData")?JSON.parse(l.getItem("freebieData")):[];e&&Object.keys(e).forEach((i=>{for(let s=0;s<e[i]._id.length;s++)e[i]._id[s].includes("|")?t.push(e[i]._id[s].split("|")[0]):t.push(e[i]._id[s])}));let i=[];n.freebie_product_ids.forEach((e=>{t.find((t=>t===e))&&i.push(e)})),d(this.ecomCart,i)}}else d(this.ecomCart,n.freebie_product_ids)}})),e?(this.localCouponCode?(this.$emit("update:coupon-code",this.localCouponCode),this.alertText=this.i19couponAppliedMsg):this.alertText=this.i19campaignAppliedMsg,this.$emit("set-discount-rule",i),this.alertVariant="info"):(this.localCouponCode?(this.alertText=s||this.i19invalidCouponMsg,this.alertVariant="warning"):this.alertText=null,this.$emit("set-discount-rule",{}))}},fetchDiscountOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isLoading=!0,this.ecomPassport.checkLogin()){const e=this.ecomPassport.getCustomer();t.customer={_id:e._id},e.display_name&&(t.customer.display_name=e.display_name)}Object(o.c)({url:"/apply_discount.json",method:"POST",data:{...this.modulesPayload,amount:{subtotal:this.localAmountTotal,...this.amount,total:this.localAmountTotal,discount:0},items:this.ecomCart.data.items,...t,gummies_app:void 0!==l.getItem("freebieData")?JSON.parse(l.getItem("freebieData")):[]}}).then((t=>{let{data:e}=t;return this.parseDiscountOptions(e.result)})).catch((t=>{console.error(t),this.alertVariant="danger",this.alertText=Object(a.a)(s.wb)})).finally((()=>{this.isLoading=!1}))},submitCoupon(t){if(t||this.canAddCoupon){const{localCouponCode:t}=this,e={discount_coupon:t};this.fetchDiscountOptions(e)}},updateDiscount(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.couponCode?!t&&this.isCouponApplied||this.submitCoupon(t):(t||!this.isUpdateSheduled&&this.amount&&this.localAmountTotal)&&this.fetchDiscountOptions()}},watch:{couponCode(t){t!==this.couponCode&&(this.localCouponCode=t,t&&!this.isFormVisible&&(this.isFormVisible=!0))},isFormAlwaysVisible(t){t&&(this.isFormVisible=!0)},isFormVisible(t){t&&this.$nextTick((()=>{this.$refs.input.focus()}))},localAmountTotal(t,e){null!==e&&Math.abs(t-e)>.01&&!this.isUpdateSheduled&&(this.isUpdateSheduled=!0,this.$nextTick((()=>{setTimeout((()=>{this.updateDiscount(),this.isUpdateSheduled=!1}),600)})))},amount:{handler(){this.fixAmount()},deep:!0}},mounted(){this.fixAmount(),this.updateDiscount(!1),this.freebieData=JSON.parse(l.getItem("freebieData")),this.getFreebies()},created(){window.frontFetchFreebies=()=>{this.submitCoupon(!0)},window.removeFreebie=this.ecomCart.removeItem,window.ecomCustomCart=this.ecomCart}};e.a=u},293:function(t,e,i){"use strict";i(99);var s=i(15),a=i(35),o=i(71),n=i(6),r=i(193),c=i(289),l=i(278),d=i(255),u=i(387),p=i(272),h={name:"TheCart",components:{APrices:r.a,CartItem:c.a,DiscountApplier:l.a,ShippingCalculator:d.a,EarnPointsProgress:u.a,RecommendedItems:p.a},props:{amount:{type:Object,default:()=>({})},checkoutUrl:{type:String,default:"/app/#/checkout"},zipCode:String,discountCoupon:String,modulesPayload:Object,ecomCart:{type:Object,default:()=>n.a}},data(){return{localZipCode:this.zipCode,canApplyDiscount:!1,isCouponApplied:!1,fixedPrice:this.amount.total}},computed:{i19checkout:()=>Object(a.a)(s.L),i19continueShopping:()=>Object(a.a)(s.ab),i19discount:()=>Object(a.a)(s.ib),i19emptyCart:()=>Object(a.a)(s.rb),cart(){return this.ecomCart.data},isValidCart(){return this.ecomCart.data.items.find((t=>{let{quantity:e}=t;return e}))},localDiscountCoupon:{get(){return this.discountCoupon},set(t){this.$emit("update:discount-coupon",t)}}},methods:{formatMoney:o.a,selectShippingService(t){this.$emit("select-shipping",t),this.$nextTick((()=>{this.canApplyDiscount=!0}))},setDiscountRule(t){this.$emit("set-discount-rule",t),this.$nextTick((()=>{this.isCouponApplied=Boolean(this.discountCoupon&&this.amount.discount)}))}},watch:{localZipCode(t){this.$emit("update:zip-code",t)},canApplyDiscount(t){t||(this.isCouponApplied=!1)}},mounted(){this.$nextTick((()=>{this.canApplyDiscount=!this.localZipCode}));const{ecomCart:t}=this,e=()=>t.data.items.reduce(((t,e)=>{let{flags:i,quantity:s}=e;return i&&i.includes("freebie")||(t+=s),t}),0);let i=e();const s=()=>{this.canApplyDiscount=!this.localZipCode;const s=e();i!==s&&(t.data.items.forEach((e=>{let{_id:i,quantity:s,flags:a}=e;Array.isArray(a)&&a.includes("freebie")&&1===s&&t.removeItem(i)})),i=s)};t.on("change",s),this.$once("hook:beforeDestroy",(()=>{t.off("change",s)}))}};e.a=h},294:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"discount-applier"},[t.hasCouponInput?[i("transition-group",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated position-absolute fadeOutUp"}},[i("form",{key:"form",staticClass:"discount-applier__form",on:{submit:function(e){return e.preventDefault(),t.submitCoupon.apply(null,arguments)}}},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"discount-applier-coupon"}},[i("b",[t._v(t._s(t.i19discountCoupon))])]),i("p",[t._v("Se possuir um cupom, digite no campo abaixo")]),i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.localCouponCode,expression:"localCouponCode"}],ref:"input",staticClass:"form-control discount-applier__input",attrs:{type:"text",id:"discount-applier-coupon",required:"",readonly:t.isLoading,placeholder:t.i19code,"aria-label":t.i19code},domProps:{value:t.localCouponCode},on:{input:[function(e){e.target.composing||(t.localCouponCode=e.target.value)},function(e){return t.localCouponCode=e.target.value.trim()}]}}),i("div",{staticClass:"input-group-append"},[t.isLoading?i("span",{staticClass:"input-group-text"},[i("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status"}}),i("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t.canAddCoupon?i("button",{key:"add",staticClass:"btn btn-outline-secondary",attrs:{type:"submit"}},[t._v(" "+t._s(t.i19add)+" ")]):i("button",{key:"applied",staticClass:"btn btn-outline-success",attrs:{disabled:"",type:"button"}},[i("i",{staticClass:"fas fa-check-circle"})])])])])])])]:t._e(),i("a-alert",{key:"alert-"+t.alertVariant,attrs:{"can-show":!t.isLoading&&Boolean(t.alertText),variant:t.alertVariant},on:{dismiss:function(e){t.alertText=null}}},[t._v(" "+t._s(t.alertText)+" ")])],2)},a=[]},389:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cart"},[i("transition-group",{attrs:{"enter-active-class":"animated fadeInDown"}},[t.cart.items.length?i("div",{key:"list",staticClass:"row"},[i("div",{staticClass:"col-md-7 col-lg-8"},[i("div",{staticClass:"cart__list"},[t._t("list",(function(){return[i("transition-group",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp faster position-absolute"}},t._l(t.cart.items,(function(t){return i("cart-item",{key:t._id,attrs:{item:t,"name-max-length":80}})})),1)]}),null,{items:t.cart.items})],2),i("div",{attrs:{id:"cashback"}},[i("div",{attrs:{id:"dinheiro-volta"}},[i("span",[i("strong",[t._v("Cashback! GANHE ATÉ ")]),t._v(" "),i("span",{staticClass:"dinheiro"},[i("strong",{attrs:{id:"changeMoney"}},[t._v(t._s(t.formatMoney(t.fixedPrice/20)))])]),t._v(" em sua próxima compra!")])])]),i("earn-points-progress",{staticClass:"my-3",attrs:{"cart-subtotal":t.cart.subtotal}}),i("span"),t._t("back-shopping",(function(){return[i("div",{staticClass:"cart__back d-none d-md-block my-4"},[i("a",{staticClass:"cart__btn-back btn btn-link",attrs:{role:"button",href:"/"}},[i("i",{staticClass:"i-arrow-left mr-1"}),t._v(" "+t._s(t.i19continueShopping)+" ")])])]}))],2),i("div",{staticClass:"col-md-5 col-lg-4 mt-3 mt-md-0"},[i("div",{staticClass:"cart__info"},[t._t("info",(function(){return[i("div",{staticClass:"cart__summary-row",attrs:{"data-subtotal":t.cart.subtotal.toFixed(2)}},[i("span",[t._v("Subtotal")]),i("div",[t._v(t._s(t.formatMoney(t.cart.subtotal)))])]),t.isValidCart?[i("transition",{attrs:{"enter-active-class":"animated fadeInDown"}},[t.amount.discount?i("div",{staticClass:"cart__summary-row mt-1",attrs:{"data-discount":t.amount.discount.toFixed(2)}},[i("span",[i("i",{staticClass:"i-tag mr-1"}),t._v(" "+t._s(t.i19discount)+" ")]),i("div",[t._v(t._s(t.formatMoney(t.amount.discount)))])]):t._e()]),i("shipping-calculator",{staticClass:"cart__shipping",attrs:{"can-select-services":!0,"shipped-items":t.cart.items,"zip-code":t.localZipCode},on:{"update:zipCode":function(e){t.localZipCode=e},"update:zip-code":function(e){t.localZipCode=e},"select-service":t.selectShippingService}}),i("div",{staticClass:"cart__summary-row cart__total",attrs:{"data-total":(t.amount.total||t.cart.subtotal).toFixed(2)}},[i("span",[t._v("Total")]),i("a-prices",{attrs:{product:{price:t.amount.total||t.cart.subtotal},"discount-option":{value:t.amount.discount},"is-literal":!0,"is-amount-total":!0},on:{"fix-price":function(e){return t.fixedPrice=e}}})],1)]:t._e(),t._t("checkout",(function(){return[t.isValidCart?i("a",{staticClass:"cart__btn-checkout btn btn-lg btn-block btn-success",attrs:{role:"button",href:t.checkoutUrl}},[i("span",{staticClass:"mr-1"},[i("i",{staticClass:"i-shopping-bag"})]),t._v(" "+t._s(t.i19checkout)+" ")]):t._e(),i("a",{staticClass:"cart__btn-back btn btn-block btn-outline-secondary",class:t.isValidCart?"d-md-none":"mt-3",attrs:{role:"button",href:"/"}},[i("i",{staticClass:"i-arrow-left mr-1"}),t._v(" "+t._s(t.i19continueShopping)+" ")])]}))]}))],2),t.isValidCart&&t.canApplyDiscount?i("discount-applier",{staticClass:"cart__discount",attrs:{amount:t.amount,"is-coupon-applied":t.isCouponApplied,"coupon-code":t.localDiscountCoupon,"modules-payload":t.modulesPayload},on:{"update:couponCode":function(e){t.localDiscountCoupon=e},"update:coupon-code":function(e){t.localDiscountCoupon=e},"set-discount-rule":t.setDiscountRule}}):t._e()],1)]):i("div",{key:"empty",staticClass:"cart__empty"},[t._t("empty",(function(){return[i("p",{staticClass:"lead text-muted"},[t._v(" "+t._s(t.i19emptyCart)+" ... ")]),i("a",{staticClass:"btn btn-primary",attrs:{href:"/"}},[i("span",{staticClass:"mr-1"},[i("i",{staticClass:"i-arrow-left"})]),t._v(" "+t._s(t.i19continueShopping)+" ")])]}))],2)])],1)},a=[]}}]);